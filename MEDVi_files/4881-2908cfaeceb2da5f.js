"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4881],{54065:function(e,t,n){var i=n(50858),o=n(55818),l=n(24246),r=n(21791),s=n(94178),a=n(42036),c=n(99511),u=n(58971),d=n(39142),m=n(61429),f=n(27378),h=n(48462),p=n(6709),g={toolbarModule:[["bold","italic","underline"],[{color:s.i}],["link"]],toolbarOptions:["bold","italic","underline","color","link"]},x=function(e){var t=e.text,n=e.onChange,i=e.textSizingOverride,o=e.color,s=(0,u.C)(d.gh),c=(0,f.useMemo)(function(){var e=t;return e=(0,p.Z)(e)?e:"<p>".concat(e,"</p>"),e=(0,h.Z)(e)},[t]);return s?(0,l.jsx)(r.ZP,{unevaluatedLabel:(0,a.getInitialPickerStringValueStr)(t),evaluatedLabel:c,textAlign:"center",textSizingOverride:i,defaultColorOverride:o,onChange:function(e){n(e.logic.value)},customToolbar:g,disableReferencePicking:!0}):null};t.Z=function(e){var t=e.title,n=e.subtitle,r=e.onChange,s=(0,u.C)(c.VU),a=t||"Form closed to new submissions",d=n||"Contact the form owner for more details.",f=(0,u.C)(c.eD);return(0,l.jsxs)("div",{className:"flex flex-col py-2 sm:py-5",children:[(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(m.khe,{className:"h-14 w-14",style:{color:s.slightlyFadedQuestionsColor}})}),(0,l.jsx)("div",{className:"mt-4 tracking-tight mb-1 sm:mb-2",children:(0,l.jsx)(x,{text:a,onChange:function(e){null==r||r(e,d)},color:s.questionsColor,textSizingOverride:{pSize:(0,o._)((0,i._)({},f?s.formElementSizes.h3Size:s.formElementSizes.h2Size),{fontWeight:700})}})}),(0,l.jsx)(x,{color:s.slightlyFadedQuestionsColor,text:d,onChange:function(e){null==r||r(a,e)},textSizingOverride:{pSize:(0,i._)({},s.formElementSizes.pSize)}})]})}},20202:function(e,t,n){n.d(t,{i:function(){return l}});var i=n(50858),o=n(259),l=function(e){var t=e.backendModel,n=e.localStorageModel,l=e.stepToStartFrom,r=e.flowTemplate,s=(0,i._)({},n);return Object.keys(t).forEach(function(e){var i,a=t[e],c=n[e];c&&e===l&&(null===(i=r.steps[e])||void 0===i?void 0:i.type)==="form"&&(0,o.b)(r,l,t)&&(a=c),s[e]=a}),s}},51290:function(e,t,n){var i=n(24246),o=n(68349),l=n(36314),r=n(39142),s=n(58971),a=n(45628),c=n(52131),u=n(11576),d=n(65218),m=n.n(d)()(Promise.all([n.e(823),n.e(8579),n.e(4956),n.e(1962),n.e(6720),n.e(6143)]).then(n.bind(n,56143)),{loadableGenerated:{webpack:function(){return[56143]}},ssr:!1}),f=function(e){var t=e.children;return(0,i.jsx)(i.Fragment,{children:t})};t.Z=function(){var e=(0,s.C)(l.kf),t=(0,s.C)(r.gh);return(0,c.Z)(),(0,i.jsx)("div",{className:"flex w-full h-full justify-between relative",children:(0,i.jsx)("div",{className:(0,u.AK)("flex flex-col justify-between h-full w-full relative","edit"===t&&"min-w-0"),children:(0,i.jsx)("div",{className:"flex w-full h-full",children:(0,i.jsx)(o.ZP,{ImageWrapper:f,children:(0,i.jsx)(a.D_,{children:(0,i.jsx)(m,{})})})})})},e)}},39347:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(18775),o=n(50858),l=n(55818),r=n(24246),s=n(57367),a=n(68349),c=n(5592),u=n(39142),d=n(42036),m=n(58971),f=n(27378),h=n(11576),p=n(51037),g=n(60053),x=n(85556),v=n(14888),b=n(73022),C=n(99511),w=n(93052),y=function(e){var t,n=e.animationsPaused,i=e.commonStartAnimationStyles,o=e.buttonText,l=(0,m.C)(C.mg),a=(0,g._)((0,f.useState)(),2),c=a[0],d=a[1],y=(0,w.S8)(),j=(0,m.C)(u.gh),N=(t=(0,p._)(function(){return(0,x.Jh)(this,function(e){switch(e.label){case 0:if("edit"===j)return(0,h.F0)("Go to preview mode to test your form",{position:"top-center",duration:5e3,description:"You are in the form editor"}),[2];return d(!0),[4,y({})];case 1:return e.sent(),d(!1),[2]}})}),function(){return t.apply(this,arguments)});return l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-[60px]"}),(0,r.jsx)("div",{className:"flex fixed sm:block bottom-4 left-2 right-2 ",children:(0,r.jsx)(b.g8,{className:"w-full",alignment:"center",disabled:!1,text:o,sizingOverride:"extra_large",onClick:N,isLoading:c})})]}):(0,r.jsx)(s.rs,{delay:.3,play:"edit"!==j&&!n,easeType:"ease-out",duration:.8,start:i,end:{opacity:1,transform:"none"},children:(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(b.g8,{alignment:"center",disabled:!1,text:o,sizingOverride:"extra_large",className:(0,h.AK)(v.Z.buttonField),onClick:N,isLoading:c})})})},j=n(82879),N=n(21791),T=n(27124),S=n.n(T),k=n(2962),_=function(){var e=(0,m.C)(C.eD);return function(t){var n="subtitle"===t?k.l.subtitle:k.l.title,i=n.desktop;return e&&n.mobile&&(i=(0,o._)({},n.desktop,n.mobile)),(0,j.YJ)(i,500,"1.3em")}},L=function(e){var t=e.commonStartAnimationStyles,n=e.animationsPaused,i=e.evaluatedLabel,o=e.unevaluatedLabel,l=e.updateLabel,a=(0,m.C)(u.gh),d=(0,m.C)(C.VU),f=_(),p=(0,m.C)(c.DtK);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.rs,{delay:p?.3:.1,play:"edit"!==a&&!n,easeType:"ease-out",duration:.8,start:t,end:{opacity:1,transform:"none"},children:(0,r.jsx)("div",{className:(0,h.AK)("flex justify-center items-center mb-2 sm:mb-4 px-3 sm:px-5","edit"===a&&"min-w-[400px] max-w-full"),children:(0,r.jsx)(N.ZP,{evaluatedLabel:i,unevaluatedLabel:o,customToolbar:k.U,placeholder:function(e){var t=e.isFocused;return(0,r.jsx)("span",{className:"whitespace-nowrap justify-center items-center flex italic",style:{color:S()(d.questionsColor).fade(t?.8:.4).string()},children:"Type here"})},onChange:function(e){l(e,"title")},textAlign:"center",defaultBold:!0,textSizingOverride:f("title")})})})})},P=function(e){var t=e.commonStartAnimationStyles,n=e.animationsPaused,i=e.evaluatedLabel,o=e.unevaluatedLabel,l=e.updateLabel,a=(0,m.C)(u.gh),d=(0,m.C)(C.VU),f=_(),p=(0,m.C)(c.DtK);return(0,r.jsx)(s.rs,{delay:p?.2:0,play:"edit"!==a&&!n,easeType:"ease-out",duration:.8,start:t,end:{opacity:1,transform:"none"},children:(0,r.jsx)("div",{className:(0,h.AK)("flex justify-center items-center mb-3 sm:mb-10 px-5 sm:px-10","edit"===a&&"min-w-[400px] max-w-full"),children:(0,r.jsx)(N.ZP,{evaluatedLabel:i,unevaluatedLabel:o,customToolbar:k.U,placeholder:function(e){var t=e.isFocused;return(0,r.jsx)("div",{className:"whitespace-nowrap justify-center items-center flex italic",style:{color:S()(d.questionsColor).fade(t?.85:.6).string()},children:"Description (optional)"})},onChange:function(e){l(e,"subtitle")},defaultColorOverride:(0,j.VN)(d),textAlign:"center",textSizingOverride:f("subtitle")})})})},F=n(87653),O=n(49616),Z=function(){var e=(0,m.T)(),t=(0,m.C)(c.AHN),n=t.template,p=(0,m.C)(u.F9),g=(0,m.C)(u.gh),x=(0,m.C)(c.MPB),v=(0,m.C)(c.VyW),b="edit"===g,C=(0,f.useMemo)(function(){return(0,d.evaluateGenericObject)(n,p,{timezone:(0,O.v)(),language:v})},[n,p,v]),w=function(r,s){e((0,c.QBs)({stepId:t.id,stepTemplate:(0,l._)((0,o._)({},n),(0,i._)({},s,r))}))},j=C.buttonText||"Start",N=(0,a.d9)(n.extraImage,!0),T=!x&&"live"===g,S=C.subtitle&&!(0,d.isRichLabelEmpty)(C.subtitle),k="edit"===g?{}:{opacity:0,transform:"translateY(-10px)"},_=(0,F.VW)({manualPadding:5}).divRef;return(0,r.jsx)("div",{className:"flex justify-center items-center w-full h-full",children:(0,r.jsx)("div",{className:(0,h.AK)("m-auto max-h-full w-full ","edit"!==g&&((0,F.rp)()?"overflow-y-hidden":"overflow-y-auto")),ref:_,children:(0,r.jsxs)("div",{className:"flex  justify-center items-center flex-col  w-full min-h-full my-10",children:[N&&(0,r.jsx)("div",{className:"relative flex justify-center mb-10 px-3 sm:px-5",children:(0,r.jsx)(s.rs,{delay:.1,play:"edit"!==g&&!T,easeType:"ease-out",duration:.8,start:k,end:{opacity:1,transform:"none"},children:(0,r.jsx)("img",{src:N,alt:"Center image",className:"max-w-full rounded",style:{maxHeight:"20vh"}})})}),(0,r.jsx)(L,{evaluatedLabel:C.title,unevaluatedLabel:n.title,updateLabel:w,commonStartAnimationStyles:k,animationsPaused:T}),(S||b)&&(0,r.jsx)(P,{commonStartAnimationStyles:k,animationsPaused:T,evaluatedLabel:C.subtitle,unevaluatedLabel:n.subtitle,updateLabel:w}),(0,r.jsx)(y,{animationsPaused:T,commonStartAnimationStyles:k,buttonText:j})]},"cover-page-".concat(null==t?void 0:t.id))})})}},41219:function(e,t,n){var i=n(51037),o=n(50858),l=n(55818),r=n(60053),s=n(85556),a=n(24246),c=n(42036),u=n(60074),d=n(5592),m=n(79165),f=n(39142),h=n(99511),p=n(58971),g=n(27378),x=n(91725),v=n(61429),b=n(48897),C=n(14888),w=n(73022),y=n(47941),j=n(32288),N=n(31955),T=n(85057),S=n(11576),k=n(77747),_=n(27124),L=n.n(_),P=n(32488),F=n(89426),O=n(87653),Z=n(38580),I=n(37885),A=n(45628),U=n(20055),E=n(61656),B=n(49616),M=function(e){var t=(0,p.T)(),n=(0,p.C)(f.kf),i=(0,p.C)(f.gh),r=(0,g.useCallback)(function(r,s){if("edit"===i&&n){var a=(0,l._)((0,o._)({},e),{email:(0,o._)({},e.email,r&&{loginTitle:r},s&&{loginCaption:s})});t((0,d.QBs)({stepId:n,stepTemplate:a}))}},[t,n,i,e]);if("edit"===i)return r};t.Z=function(e){var t,n,o,l=e.loginPageTemplate,_=(0,r._)((0,g.useState)(""),2),z=_[0],q=_[1],G=(0,r._)((0,g.useState)(!1),2),K=G[0],V=G[1],D=(0,r._)((0,g.useState)(!1),2),R=D[0],Q=D[1],H=(0,r._)((0,g.useState)(),2),J=H[0],W=H[1],X=(0,p.C)(m.AT),Y=(0,p.C)(f.S_),$=(0,b.T)().t,ee=(0,p.C)(f.gh),et=(0,r._)((0,g.useState)(""),2),en=et[0],ei=et[1],eo=(0,r._)((0,g.useState)(!1),2),el=eo[0],er=eo[1],es=(0,p.C)(d.uCB),ea=(0,p.C)(h.VU),ec=(0,p.C)(f.F9),eu=(0,p.C)(d.VyW),ed=(0,g.useMemo)(function(){return(0,c.evaluateGenericObject)(l.email,ec,{timezone:(0,B.v)(),language:eu})},[l,ec,eu]),em=(0,p.C)(F.te),ef=(t=(0,i._)(function(e){var t,n;return(0,s.Jh)(this,function(i){switch(i.label){case 0:if(e.preventDefault(),W(void 0),"edit"===ee)return(0,S.F0)("Go to preview mode to test out your form.",{duration:5e3,position:"top-center"}),[2];Q(!0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,Z.UX)(em,"/v1/flow/login/respondent/".concat(es,"/sendMagicLink?mode=").concat(ee),"POST",{email:z})];case 2:return(null==(t=i.sent())?void 0:t.success)&&V(!0),[3,4];case 3:return W((null==(n=i.sent())?void 0:n.message)||n),[3,4];case 4:return Q(!1),[2]}})}),function(e){return t.apply(this,arguments)}),eh=$("Login to continue"),ep=(0,p.C)(m.dX).stepId,eg=(0,U.E)(l),ex=(0,p.C)(f.nx),ev=(0,p.C)(f.Bp),eb=M(l),eC=(0,p.C)(d.J$G),ew=(0,p.T)(),ey=(n=(0,i._)(function(){var e,t;return(0,s.Jh)(this,function(n){switch(n.label){case 0:if("edit"===ee)return(0,S.eZ)("Go to preview mode to test out your login page"),[2];if(!ex)return u.Tb(Error("Session missing onAttemptPinVerification")),(0,S.eZ)("Session missing"),[2];n.label=1;case 1:if(n.trys.push([1,3,,4]),!ep)throw Error("Login step id missing");return er(!0),[4,(0,E.Fj)({model:ec,sessionUuid:ev,mode:ee,flowPublicIdentifier:es,dispatch:ew,loginStepId:ep,sessionToken:ex,maybeLoginPin:en,maybeLoginEmail:z,flowTemplate:X,agentLocation:em})];case 2:return n.sent(),er(!1),[3,4];case 3:return e=n.sent(),(0,I.p)(e),t=e,(0,S.eZ)("".concat(t.message),{position:"top-center",duration:5e3}),er(!1),[2];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),ej=L()(ea.questionsColor).fade(.55).hsl().string(),eN="edit"===ee||(0,S.zd)()&&"fullscreen"!==(0,O.r5)(),eT=(null===(o=l.email.loginMethods)||void 0===o?void 0:o.length)>0?l.email.loginMethods:["otp"];return(0,a.jsx)(A._0,{children:(0,a.jsxs)("div",{className:"mt-4 mb-6 ",children:[(0,a.jsx)(U.Q,{titleTemplate:l.email.loginTitle,captionTemplate:l.email.loginCaption,defaultTitle:eh,onUpdate:eb,legacyTitleOverride:eg}),K?(0,a.jsxs)("div",{className:"flex w-full flex-col px-5 pt-6 md:px-7",children:[(0,a.jsx)(T.Z,{label:$("Check your email and provide the pin below"),subLabel:$("Make sure to check your spam folder."),className:"pl-[22px] mb-4 mt-2",dataCy:"login-pin-input",labelStyles:{color:ea.questionsColor},bold:!0,children:(0,a.jsx)("div",{className:(0,S.AK)(eC&&"flex justify-end"),style:{direction:"ltr",textAlign:"left"},children:(0,a.jsx)(x.u,{length:c.LOGIN_PIN_LENGTH,onChange:function(e,t,n){return ei(n.join(""))},borderColor:ea.borderColor,focusBorderColor:ea.primaryColor,inputStyle:{color:ea.questionsColor}})})}),(0,a.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,a.jsx)(w.g8,{alignment:"center",hideShadow:!0,text:$("Resend pin"),backgroundColor:ea.questionsBackgroundColor,textColorOverride:ej,onClick:(0,i._)(function(){return(0,s.Jh)(this,function(e){return q(""),ei(""),V(!1),[2]})}),isLoading:!1,className:(0,S.AK)("rounded-md",C.Z.backButton),style:{}}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(w.g8,{alignment:"right",disabled:en.length!==c.LOGIN_PIN_LENGTH,text:$("Continue"),isLoading:el,onClick:ey})})]})]}):(0,a.jsxs)("div",{className:"mt-4 sm:mx-auto sm:w-full sm:max-w-sm",children:[eT.includes("google")&&(0,a.jsxs)("div",{className:"mt-7 ",children:[(0,a.jsx)(w.g8,{activeThemeOverride:ea,style:{borderColor:ea.borderColor},labelClassName:"relative",customReactButtonContent:(0,a.jsxs)("div",{className:"flex items-center w-full text-blue-500 text-base  justify-center",children:[(0,a.jsx)(k._8,{}),(0,a.jsx)("div",{className:"ml-3",children:"Sign in with Google"})]}),text:"",backgroundColor:"white",onClick:(0,i._)(function(){var e;return(0,s.Jh)(this,function(t){return e=(0,P.rr)(em),window.location.href="".concat(e,"/v1/flow/login/respondent/").concat(es,"/googleLogin?mode=").concat(ee,"&originalUrl=").concat(encodeURIComponent(window.location.href)),[2]})}),className:(0,S.AK)("flex w-full justify-center rounded-md   text-sm font-semibold leading-6 shadow-sm"),type:"submit",alignment:"full",sizingOverride:"medium"}),eT.includes("otp")&&(0,a.jsxs)("div",{className:"my-6 relative mt-8 ",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:(0,a.jsx)("div",{className:"w-full border-t ",style:{borderColor:ea.borderColor}})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2",style:{backgroundColor:ea.questionsBackgroundColor,color:ea.slightlyFadedQuestionsColor},children:"Or"})})]})]}),eT.includes("otp")&&(0,a.jsxs)("form",{onSubmit:ef,className:"space-y-6",children:["edit"===ee&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(y.Z,{type:"success",className:"mb-6",customBackgroundColor:ea.isDark?ea.questionsBackgroundColor:void 0,title:"Email login is enabled",children:"Test your form in preview mode. Users will be prompted to verify their email address the first time they submit a form."})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{children:(0,a.jsx)(T.Z,{label:$("Email"),leftLabelClassName:"!font-medium !leading-6 ",bold:!0,color:ea.questionsColor,children:(0,a.jsx)(N.Fx,{activeTheme:ea,children:(0,a.jsx)(j.Z,{value:z,autoFocus:!eN,onChange:function(e){q(e)},type:"email",Icon:v.bV6,"aria-required":!eT.includes("google")})})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(w.g8,{activeThemeOverride:ea,text:ed.loginButtonText||$("Verify email"),backgroundColor:ea.primaryColor,className:(0,S.AK)("flex w-full justify-center rounded-md   text-sm font-semibold leading-6 shadow-sm",C.Z.buttonField),type:"submit",alignment:"full",sizingOverride:"medium",isLoading:R}),(J||Y)&&(0,a.jsx)("div",{className:"text-sm  mt-2",style:{color:ea.errorColor},children:J||Y})]})]})]})]})]})})}},70764:function(e,t,n){var i=n(51037),o=n(50858),l=n(55818),r=n(60053),s=n(85556),a=n(24246),c=n(79165),u=n(5592),d=n(39142),m=n(99511),f=n(58971),h=n(27378),p=n(73022),g=n(32288),x=n(31955),v=n(61429),b=n(60074),C=n(48897),w=n(14888),y=n(47941),j=n(89426),N=n(42036),T=n(93052),S=n(11576),k=n(38580),_=n(45628),L=n(20055),P=n(61656),F=n(37885),O=n(49616),Z=function(e){var t=(0,f.T)(),n=(0,f.C)(d.kf),i=(0,f.C)(d.gh),r=(0,h.useCallback)(function(r,s){if("edit"===i&&n){var a=(0,l._)((0,o._)({},e),{password:(0,o._)({},e.password,r&&{loginTitle:r},s&&{loginCaption:s})});t((0,u.QBs)({stepId:n,stepTemplate:a}))}},[t,n,i,e]);if("edit"===i)return r};t.Z=function(e){var t,n,o=e.loginPageTemplate,l=e.loginStepId,I=(0,f.C)(d.gh),A=(0,f.C)(m.VU),U=(0,f.C)(c.AT),E=(0,f.C)(d.nx),B=(0,C.T)().t,M=(0,f.C)(d.Bp),z=(0,f.C)(u.uCB),q=(0,f.C)(u.qpS),G=(0,r._)((0,h.useState)(""),2),K=G[0],V=G[1],D=(0,r._)((0,h.useState)(),2),R=D[0],Q=D[1],H=(0,r._)((0,h.useState)(!1),2),J=H[0],W=H[1],X=(0,f.C)(j.te),Y=(0,k._r)(X,"/v1/flow/login/password/".concat(z,"/checkPassword"),"POST"),$=Y.request,ee=Y.error,et=(0,f.C)(d.F9),en=(0,f.T)(),ei=(0,f.C)(u.VyW),eo=(0,T.S8)(),el=(0,h.useMemo)(function(){return(0,N.evaluateGenericObject)(o.password,et,{timezone:(0,O.v)(),language:ei})},[o,et]),er=(t=(0,i._)(function(){var e,t,n;return(0,s.Jh)(this,function(i){switch(i.label){case 0:if("edit"===I)return(0,S.F0)("Go to preview mode to test out your form.",{duration:5e3,position:"top-center"}),[2];Q(void 0),i.label=1;case 1:if(i.trys.push([1,5,,6]),!E)return b.Tb(Error("Session missing passwordverification")),(0,S.eZ)("Session missing"),[2];if(!M)throw Error("Unexpected - no submissionId");return[4,$({providedPassword:K,mode:I,model:et,sessionUuid:M,sessionToken:E})];case 2:if(!(null==(e=i.sent())?void 0:e.isAuthenticated)||(en((0,d.B_)({loginPassword:K})),t=(0,P.fy)({newModel:null==e?void 0:e.newModel,oldModel:et,loginStepId:l,flowTemplate:U}),e.currentUpdateSequenceNumber&&en((0,d.Rp)({mode:I,flowPublicIdentifier:z,sequenceNumber:e.currentUpdateSequenceNumber})),!t)||(en((0,d.QB)({flowPublicIdentifier:z,mode:I,newModel:t})),!q))return[3,4];return[4,eo({newModel:t})];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:return n=i.sent(),(0,F.p)(n),Q(n.message),[3,6];case 6:return[2]}})}),function(){return t.apply(this,arguments)}),es=Z(o),ea=(0,L.E)(o),ec=B("Enter password to continue");return(0,a.jsx)(_._0,{children:(0,a.jsxs)("div",{className:"mt-4 mb-7",children:[(0,a.jsx)(L.Q,{titleTemplate:o.password.loginTitle,captionTemplate:o.password.loginCaption,defaultTitle:ec,onUpdate:es,legacyTitleOverride:ea}),(0,a.jsx)("div",{className:"mt-4 sm:mx-auto sm:w-full sm:max-w-sm",children:(0,a.jsxs)("form",{onSubmit:(n=(0,i._)(function(e){return(0,s.Jh)(this,function(t){switch(t.label){case 0:return e.preventDefault(),W(!0),[4,er()];case 1:return t.sent(),W(!1),[2]}})}),function(e){return n.apply(this,arguments)}),className:"flex flex-col !cursor-default",children:["edit"===I&&(0,a.jsx)(a.Fragment,{children:""===o.password.password?(0,a.jsx)(y.Z,{type:"warning",className:"mb-6",title:"No password has been set yet",children:(0,a.jsx)(a.Fragment,{children:"Login setup is not complete, configure a password on the left hand side"})}):(0,a.jsx)(y.Z,{type:"success",className:"mb-6",customBackgroundColor:A.isDark?A.questionsBackgroundColor:void 0,title:"Password protection is enabled",children:"Test your form in preview mode. All users will be prompted to enter the provided password."})}),(0,a.jsx)(x.Fx,{activeTheme:A,children:(0,a.jsx)(g.Z,{type:"password",autoFocus:"edit"!==I,placeholder:B("Enter password"),onChange:V,value:K,Icon:v.khe,"aria-required":!0})}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)(p.g8,{alignment:"full",className:(0,S.AK)("flex w-full justify-center rounded-md   text-sm font-semibold leading-6 shadow-sm",w.Z.buttonField),text:el.loginButtonText||B("Continue"),disabled:!1,type:"submit",isLoading:J}),(R||ee)&&(0,a.jsx)("div",{className:"text-sm  mt-2",style:{color:A.errorColor},children:R||ee})]})]})})]})})}},4772:function(e,t,n){var i=n(51037),o=n(50858),l=n(55818),r=n(60053),s=n(85556),a=n(24246),c=n(5592),u=n(39142),d=n(99511),m=n(42036),f=n(58971),h=n(27378),p=n(61429),g=n(48897),x=n(14888),v=n(73022),b=n(47941),C=n(32288),w=n(31955),y=n(85057),j=n(11576),N=n(89426),T=n(38580),S=n(45628),k=n(20055),_=n(49616),L=function(e){var t=(0,f.T)(),n=(0,f.C)(u.kf),i=(0,f.C)(u.gh),r=(0,h.useCallback)(function(r,s){if("edit"===i&&n){var a=(0,l._)((0,o._)({},e),{sso:(0,o._)({},e.sso,r&&{loginTitle:r},s&&{loginCaption:s})});t((0,c.QBs)({stepId:n,stepTemplate:a}))}},[t,n,i,e]);if("edit"===i)return r};t.Z=function(e){var t,n=e.loginPageTemplate,o=(0,r._)((0,h.useState)(""),2),l=o[0],P=o[1],F=(0,r._)((0,h.useState)(!1),2),O=F[0],Z=F[1],I=(0,r._)((0,h.useState)(),2),A=I[0],U=I[1],E=(0,f.C)(u.S_),B=(0,g.T)().t,M=(0,f.C)(u.gh),z=(0,f.C)(c.uCB),q=(0,f.C)(d.VU),G=(0,f.C)(u.F9),K=(0,f.C)(c.VyW),V=(0,h.useMemo)(function(){return(0,m.evaluateGenericObject)(n.sso,G,{timezone:(0,_.v)(),language:K})},[n,G]),D=(0,f.C)(N.te),R=(t=(0,i._)(function(e){var t,n;return(0,s.Jh)(this,function(i){switch(i.label){case 0:if(e.preventDefault(),"edit"===M)return(0,j.F0)("Go to preview mode to test out your form.",{duration:5e3,position:"top-center"}),[2];Z(!0),U(void 0),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,T.UX)(D,"/v1/flow/login/respondent/".concat(z,"/ssoRespondentLogin?mode=").concat(M,"&email=").concat(encodeURIComponent(l),"&originalUrl=").concat(encodeURIComponent(window.location.href)),"POST",{email:l,url:window.location.href})];case 2:if(!(null==(t=i.sent())?void 0:t.authorizationUrl))throw Error("Single sign-on not enabled for this domain. Contact the form owner.");return window.location.href=t.authorizationUrl,[3,4];case 3:return U((null==(n=i.sent())?void 0:n.message)||n),[3,4];case 4:return Z(!1),[2]}})}),function(e){return t.apply(this,arguments)}),Q=B("Login to continue"),H=(0,k.E)(n),J=L(n);return(0,a.jsx)(S._0,{children:(0,a.jsxs)("div",{className:"mt-4 mb-6 ",children:[(0,a.jsx)(k.Q,{titleTemplate:n.sso.loginTitle,captionTemplate:n.sso.loginCaption,defaultTitle:Q,onUpdate:J,legacyTitleOverride:H}),(0,a.jsx)("div",{className:"mt-4 sm:mx-auto sm:w-full sm:max-w-sm",children:(0,a.jsxs)("form",{onSubmit:R,className:"space-y-6",children:["edit"===M&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(b.Z,{type:"success",className:"mb-6",customBackgroundColor:q.isDark?q.questionsBackgroundColor:void 0,title:"SSO login is enabled",children:"Test your form in preview mode. Users will be prompted to login with SSO the first time they submit a form on a device."})}),(0,a.jsx)("div",{children:(0,a.jsx)(y.Z,{label:B("Email"),leftLabelClassName:"!font-medium !leading-6 ",bold:!0,color:q.questionsColor,children:(0,a.jsx)(w.Fx,{activeTheme:q,children:(0,a.jsx)(C.Z,{value:l,autoFocus:"edit"!==M,onChange:function(e){P(e)},type:"email",Icon:p.bV6,"aria-required":!0})})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(v.g8,{activeThemeOverride:q,text:V.loginButtonText||B("Sign in with SSO"),backgroundColor:q.primaryColor,className:(0,j.AK)("flex w-full justify-center rounded-md   text-sm font-semibold leading-6 shadow-sm",x.Z.buttonField),type:"submit",alignment:"full",sizingOverride:"medium",isLoading:O}),(A||E)&&(0,a.jsx)("div",{className:"text-sm  mt-2",style:{color:q.errorColor},children:A||E})]})]})})]})})}},20055:function(e,t,n){n.d(t,{E:function(){return C},Q:function(){return w}});var i=n(24246),o=n(94178),l=n(92396),r=n(21791),s=n(27124),a=n.n(s),c=n(39142),u=n(99511),d=n(42036),m=n(58971),f=n(27378),h=n(11576),p=n(52413),g=n(49749),x=n(49616),v=n(5592),b={toolbarModule:[[{header:[1,2,3,4,5,!1]}],["bold","italic","underline"],[{color:o.i}],["link"]],toolbarOptions:["bold","italic","underline","header","color","link"]},C=function(e){var t,n=null===(t=Object.values(e.widgets||{}).find(function(e){return"Text"===e.type}))||void 0===t?void 0:t.template;return null==n?void 0:n.contents},w=function(e){var t,n=e.titleTemplate,o=e.captionTemplate,s=e.defaultTitle,C=e.legacyTitleOverride,w=e.onUpdate,y=(0,m.C)(u.VU),j=null==n?void 0:null===(t=n.logic)||void 0===t?void 0:t.value,N=j===p.T||!j||!j.replace(/<\/?[^>]+(>|$)/g,""),T=(0,m.C)(c.F9),S=!!C,k=(0,f.useMemo)(function(){return{title:N&&C?C:n,caption:o}},[N,o,C,n]),_=(0,m.C)(v.VyW),L=(0,f.useMemo)(function(){return(0,d.evaluateGenericObject)(k,T,{timezone:(0,x.v)(),language:_})},[k,T,_]),P=(0,m.C)(c.gh),F="edit"===P||L.caption,O=(0,m.C)(u.vB),Z=(0,g.G)(n.logic.value)||"div",I=(0,g.G)(o.logic.value)||"div";return(0,i.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm flex flex-col items-center",children:[O&&(0,i.jsx)(l.Z,{className:"mb-4"}),(0,i.jsx)(r.ZP,{evaluatedLabel:N&&!S?"<h2><strong>".concat(s,"</strong></h2>"):L.title,unevaluatedLabel:k.title,customToolbar:b,placeholder:function(e){var t=e.isFocused;return(0,i.jsx)(Z,{className:"whitespace-nowrap justify-center items-center flex text-center text-2xl font-bold tracking-tight duration-200",style:{color:a()(y.questionsColor).fade(t?.8:0).string()},children:s})},onChange:function(e){null==w||w(e,void 0)},textAlign:"center"}),F&&(0,i.jsx)("div",{className:(0,h.AK)("flex justify-center items-center mt-[6px]","edit"===P&&"min-w-[400px] max-w-full"),children:(0,i.jsx)(r.ZP,{evaluatedLabel:L.caption,unevaluatedLabel:o,customToolbar:b,placeholder:function(e){var t=e.isFocused;return(0,i.jsx)(I,{className:"whitespace-nowrap justify-center items-center flex italic duration-200",style:{color:a()(y.questionsColor).fade(t?.85:.6).string()},children:"Description (optional)"})},onChange:function(e){console.log("newValue: ",e),null==w||w(void 0,e)},defaultColorOverride:y.slightlyFadedQuestionsColor,textAlign:"center"})})]})}},61656:function(e,t,n){n.d(t,{Fj:function(){return p},dP:function(){return g},fy:function(){return h}});var i,o=n(51037),l=n(85556),r=n(39142),s=n(42036),a=n(57500),c=n(20202),u=n(61320),d=n.n(u),m=n(8531),f=n(38580),h=function(e){var t,n=e.newModel,i=e.oldModel,o=e.loginStepId,l=e.flowTemplate,r=n.stepHistory,s=r;r&&r.path.length>0?t=r.path[r.path.length-1]:s={path:[o]};var a=(0,c.i)({backendModel:n,flowTemplate:l,localStorageModel:i,stepToStartFrom:t===o?void 0:t});return a.stepHistory=s,a},p=(i=(0,o._)(function(e){var t,n,i,o,c,u,d,p,g,x,v,b,C,w,y;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.model,n=e.sessionUuid,i=e.mode,o=e.flowPublicIdentifier,c=e.dispatch,u=e.loginStepId,d=e.sessionToken,p=e.maybeLoginPin,g=e.maybeLoginEmail,x=e.flowTemplate,v=e.agentLocation,b=(0,a.vl)()[s.MAGIC_LINK_LOGIN_TOKEN_PARAMETER],[4,(0,f.UX)(v,"/v1/flow/login/respondent/".concat(o,"/profile").concat(b?"?".concat(s.MAGIC_LINK_LOGIN_TOKEN_PARAMETER,"=").concat(b):""),"POST",{sessionUuid:n,model:t,mode:i,sessionToken:d,urlParams:(0,a.vl)(),maybeLoginPin:p,maybeLoginEmail:g})];case 1:if(!(C=l.sent()))throw Error("No response from login");return C.cookieKey&&C.token&&(0,m.$7)(C.cookieKey,C.token),(null==C?void 0:C.respondent)&&c((0,r.P2)({respondent:C.respondent,submissionLimitReachedForLoginForm:C.submissionLimitReachedForForm,inProgressFlowSession:C.inProgressFlowSession})),C.currentUpdateSequenceNumber&&c((0,r.Rp)({mode:i,flowPublicIdentifier:o,sequenceNumber:C.currentUpdateSequenceNumber})),(w=h({newModel:C.model,oldModel:t,loginStepId:u,flowTemplate:x}))&&c((0,r.QB)({flowPublicIdentifier:o,mode:i,newModel:w})),(y=w.stepHistory.path.filter(function(e){return e!==u}).length>0?w.stepHistory.path[w.stepHistory.path.length-1]:void 0)&&c((0,r.D7)({flowPublicIdentifier:o,stepId:y,existingStepHistory:w.stepHistory.path,mode:i})),[2]}})}),function(e){return i.apply(this,arguments)}),g=function(e){if(!e)return"never";var t=d()(),n=d()(e);return 7>t.diff(n,"days")?n.fromNow():n.format("lll")}},5373:function(e,t,n){var i=n(24246),o=n(68349),l=n(36314),r=n(58971),s=n(45628),a=n(52131),c=n(39142),u=n(11576),d=n(65218),m=n.n(d)()(Promise.all([n.e(823),n.e(1445),n.e(8500),n.e(7045)]).then(n.bind(n,78500)),{loadableGenerated:{webpack:function(){return[78500]}},ssr:!1}),f=function(e){var t=e.children;return(0,i.jsx)(i.Fragment,{children:t})};t.Z=function(){var e=(0,r.C)(l.kf),t=(0,r.C)(c.gh);return(0,a.Z)(),(0,i.jsx)("div",{className:(0,u.AK)("flex w-full h-full justify-between relative","edit"===t&&"min-w-0"),children:(0,i.jsx)("div",{className:"flex flex-col justify-between h-full w-full relative min-w-0",children:(0,i.jsx)("div",{className:"flex w-full h-full",children:(0,i.jsx)(o.ZP,{ImageWrapper:f,children:(0,i.jsx)(s.D_,{children:(0,i.jsx)(m,{})})})})})},e)}},99540:function(e,t,n){var i=n(60053),o=n(24246),l=n(27124),r=n.n(l),s=n(39142),a=n(58971),c=n(81841);n(46039);var u=n(71866),d=n.n(u),m=n(74315),f=n(11576),h=n(32488),p=n(99511),g=function(e){var t=r()(e);return .1>r()(t).luminosity()?t.mix(r()("white"),.1).hsl().string():r()(t).isDark()?t.mix(r()("white"),.25).hsl().string():t.darken(.05).hsl().string()},x=function(e){var t=null==e?void 0:e.backgroundColor,n=null==e?void 0:e.questionsBackgroundColor,i=t||d().gray[100],o=n||d().white;return{backgroundColor:i,baseColor:g(o),highlightColor:r()(o).darken(.015).hsl().string(),formBackgroundColor:o}};t.Z=function(e){var t=e.activeTheme,n="live"===(0,a.C)(s.gh),l=(0,a.C)(p.eD),r=(0,i._)((0,m.useQueryParam)(h.zA,m.StringParam),1)[0],u=x(t),d=u.backgroundColor,g=u.highlightColor,v=u.baseColor,b=u.formBackgroundColor;return(0,o.jsx)("div",{className:(0,f.AK)("w-screen h-screen flex justify-center items-start overflow-auto "),style:{height:n||"yes"===r?"calc(100vh)":"calc(100vh - 58px)",background:l?b:d},children:(0,o.jsxs)("div",{className:"max-w-[650px] w-screen flex flex-col sm:rounded-lg py-4 px-4 mt-6 sm:mt-12",style:{background:b},children:[(0,o.jsx)(c.Z,{count:1,height:25,highlightColor:g,baseColor:v,className:"mb-3"}),(0,o.jsx)(c.Z,{count:1,height:25,highlightColor:g,baseColor:v,className:"mb-3"}),(0,o.jsx)(c.Z,{count:1,height:25,highlightColor:g,baseColor:v})]})})}}}]);